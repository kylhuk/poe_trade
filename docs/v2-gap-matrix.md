# v2.0 Capability Gap Matrix

### Snapshot
- **What works today:** the repo documents the Ops & Runtime Streamlit UI, Ops runbook SLOs, and DB/ETL architecture so a bootstrapper can spin up ClickHouse + API/UI services and inspect ingest metrics (`README.md:13-100`, `docs/ops-runbook.md:1-21`, `01-architecture.md:1-83`).
- **Biggest blockers to profitable usage:** ingestion/ETL remain staged rather than live, API responses are still deterministic stubs, and UI/alert surfaces lack the remediation context operators need before flipping trades (`06-db-etl-roadmap.md:1-231`, `docs/ops-runtime-ui-upgrade-plan.md:3-99`).
- **Top 5 v2 priorities from this audit:**
  1. Deliver fully checkpointed bronze→silver→gold ingestion so players can trust the stats/valuations (`06-db-etl-roadmap.md:1-231`).
  2. Replace deterministic LedgerWorkflowService stubs with ClickHouse-backed telemetry to surface live feels.
  3. Wire Ops & Runtime UI controls/feeds to real alerts so operators can react before flips expire (`docs/ops-runtime-ui-upgrade-plan.md:16-183`).
  4. Build overlay/highlight tooling with dim masks and pricing filters to prevent misclicks (`07-exilelens-overlay-plan.md:1-59`, `10-comprehensive-feature-backlog.md:1-830`).
  5. Formalize alerting, checkpoint drift recovery, and rate-limit governance so players can automate scripts without surprise bans (`docs/ops-runbook.md:8-21`, `06-db-etl-roadmap.md:24-231`).

### Capability matrix
| Capability Area | Status | Evidence | Gap summary & player profitability impact |
|---|---|---|---|
| Bronze ingestion coverage | partial | `06-db-etl-roadmap.md:1-231` documents phases for MarketHarvester/StashScribe, throttler, checkpoints, and smoke checks but no proof-of-deployment or runtime health marks, only planning steps. | Bronze tables power all pricing; until raw ingestion writes reliably (checkpointed cursors, throttler observability) players lack fresh data for flips or stash value checks, so profitability decisions are blind. |
| Silver/Gold pipeline coverage | planned | `06-db-etl-roadmap.md:1-231` lists silver canonical + gold aggregate milestones, while `10-comprehensive-feature-backlog.md:1-830` enumerates backlog tasks dependent on those layers. | Without canonical item/price stats, automated valuations and flip detectors cannot be trusted, so high-value opportunities stay undiscovered and players risk stale prices. |
| API/service layer realism (deterministic vs live) | partial | Current API paths (see `docs/ops-runtime-ui-upgrade-plan.md:3-99`) still rely on deterministic data and the `/healthz` endpoint never touches ClickHouse. | API responses currently misrepresent live ingestion; players cannot rely on the surface for profit signals and may act on demo data, risking missed flips or stale pricing. |
| Web UI maturity | partial | `README.md:37-100` describes a Streamlit Ops & Runtime tab plus optional services; `docs/ops-runtime-ui-upgrade-plan.md:3-99` lays out future hero bands, severity cards, and automation controls. | UI has minimal hierarchy/filters and lacks escalation context, so operators still refresh manually and alerts are hard to prioritize, slowing profitable execution windows. |
| Alerting/notification channels | partial | `docs/ops-runbook.md:8-21` lists SLOs/failure recovery steps and `docs/ops-runtime-ui-upgrade-plan.md:3-99` proposes grouped alerts, timelines, and remediation hints. | Alerts exist on paper but lack escalation automation or multi-channel delivery, so critical ingestion lags may go unnoticed, costing players time-sensitive flips. |
| Overlay/client utility maturity | planned | `07-exilelens-overlay-plan.md:1-59` plus overlay backlog phases in `10-comprehensive-feature-backlog.md:1-830` describe objectives, rendering strategy, dim masks, selection caps, and integration milestones. | Until these overlays ship, players must manually track items/footprints, increasing misclicks and slowing trade executions for mid/high chaos items. |
| Ops/reliability/self-healing | partial | `docs/ops-runbook.md:1-21` and `README.md:37-57` cover runbooks, health pages, and alert badges, though the current stack still reports health without contacting ClickHouse. | Recovery procedures are documented but not enforced; healthchecks can lie and there is no self-healing for rate-limit storms, so profitability drops when ingestion stalls without automatic remediation. |
| Data governance/compliance/rate limits | partial | `06-db-etl-roadmap.md:24-231` spells out PoE rate-limit contract, dynamic throttler behavior, and SLOs; `10-comprehensive-feature-backlog.md:1-830` imposes policy guardrails (manual trigger, rate-limit lint, fallback modes). | Governance is still in planning; until enforcement exists, automated tools risk triggering PoE limits or policy violations, exposing players to bans or missing high-value market windows. |
